<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI Photo Studio Â· Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="dashboard.css">

<style>
    body {
        margin:0;
        background:#0b0f1c;
        font-family:Inter, system-ui, sans-serif;
        color:white;
    }

    /* Header */
    .dash-header {
        padding:40px 20px;
        text-align:center;
        background:#111827;
        border-bottom:1px solid #1f2937;
    }

    .dash-header h1 {
        font-size:32px;
        font-weight:800;
        margin-bottom:10px;
    }

    .dash-header p {
        font-size:18px;
        opacity:0.8;
    }

    /* Cards */
    .dash-main {
        padding:30px 20px;
        max-width:1100px;
        margin:auto;
        display:grid;
        grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
        gap:20px;
    }

    .dash-card {
        background:#111827;
        border:1px solid #1f2937;
        border-radius:16px;
        padding:25px;
        text-align:left;
        text-decoration:none;
        color:white;
        transition:0.2s;
        cursor:pointer;
    }

    .dash-card:hover {
        transform:translateY(-4px);
        border-color:#3fb7ff;
    }

    .dash-card h3 {
        margin:0 0 10px 0;
        font-size:22px;
        font-weight:700;
    }

    .dash-card p {
        opacity:0.7;
        font-size:15px;
    }

    /* Footer */
    .dash-footer {
        text-align:center;
        padding:30px;
        margin-top:20px;
    }

    #logoutBtn {
        padding:12px 22px;
        border:none;
        border-radius:10px;
        background:#dc2626;
        color:white;
        cursor:pointer;
        font-size:16px;
        transition:0.2s;
    }

    #logoutBtn:hover {
        background:#ef4444;
    }
</style>

<!-- FIREBASE v12 -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCM6r66kW9xkBA5rgVcz4sP57N2v2BMbkg",
        authDomain: "ai-photo-studio-24354.firebaseapp.com",
        projectId: "ai-photo-studio-24354",
        storageBucket: "ai-photo-studio-24354.firebasestorage.app",
        messagingSenderId: "411346648650",
        appId: "1:411346648650:web:aefd1b26027ed5e8fab0b3",
        measurementId: "G-8TXC63YKPD"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    onAuthStateChanged(auth, async (user) => {
        if (!user) return window.location.href = "/signin.html";

        const ref = doc(db, "users", user.uid);
        const snap = await getDoc(ref);

        let plan = "Free User";

        if (snap.exists()) {
            const data = snap.data();
            if (data.plan === "pro") plan = "Pro Member";
            if (data.plan === "trial") plan = "Free Trial (7 days)";
            if (data.plan === "daypass") plan = "Day Pass Active";
        }

        document.getElementById("planName").innerText = plan;
    });

    // LOGOUT
    window.logout = () => {
        signOut(auth).then(() => {
            window.location.href = "/signin.html";
        });
    };
</script>

</head>
<body>

<header class="dash-header">
    <h1>Welcome Back ðŸ‘‹</h1>
    <p>Your Current Plan: <span id="planName">Loadingâ€¦</span></p>
</header>

<main class="dash-main">

    <a class="dash-card" href="/index.html">
        <h3>Start Editing</h3>
        <p>Use all available AI tools instantly</p>
    </a>

    <a class="dash-card" href="/gallery.html">
        <h3>Your Gallery</h3>
        <p>See everything you've created</p>
    </a>

    <a class="dash-card" href="/profile.html">
        <h3>Account Settings</h3>
        <p>Manage email, password & subscription</p>
    </a>

    <a class="dash-card" href="/pricing.html">
        <h3>Upgrade Plan</h3>
        <p>Unlock full unlimited access</p>
    </a>

</main>

<footer class="dash-footer">
    <button id="logoutBtn" onclick="logout()">Log out</button>
</footer>

</body>
</html>
